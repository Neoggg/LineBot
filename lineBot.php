<?php
require 'vendor/autoload.php';
require_once 'models/LineJson.php';
require_once 'models/LinePost.php';
require_once 'managers/LineLocationMgr.php';

use \LINE\LINEBot;
use LINE\LINEBot\HTTPClient\CurlHTTPClient;
use \LINE\LINEBot\QuickReplyBuilder\QuickReplyMessageBuilder;
use \LINE\LINEBot\QuickReplyBuilder\ButtonBuilder\QuickReplyButtonBuilder;
use \LINE\LINEBot\TemplateActionBuilder\LocationTemplateActionBuilder;
use \LINE\LINEBot\TemplateActionBuilder\UriTemplateActionBuilder;
use \LINE\LINEBot\TemplateActionBuilder\MessageTemplateActionBuilder;

// Line外開Browser
$exBrowser = '&openExternalBrowser=1';

$jsonMessage = '{"destination":"U52d37d1d9b625754fa7308ed6af263ef","events":[{"type":"message","message":{"type":"text","id":"14743579319820","text":"..."},"timestamp":1631597207787,"source":{"type":"user","userId":"U420aa8a5b3859615a73a08c3f9fa53e2"},"replyToken":"f223ae75bb764c22a14cc18f72fc1929","mode":"active"}]}';
$jsonMap = '{"destination":"U52d37d1d9b625754fa7308ed6af263ef","events":[{"type":"message","message":{"type":"location","id":"14743074306580","latitude":25.028028164750477,"longitude":121.5493593925288,"address":"106台灣台北市大安區敦化南路二段111號"},"timestamp":1631590614516,"source":{"type":"user","userId":"U420aa8a5b3859615a73a08c3f9fa53e2"},"replyToken":"5b7db4bb1a924978918706f76292c7a0","mode":"active"}]}';

$HttpRequestBody = file_get_contents('php://input');
// file_put_contents('php://stderr', $HttpRequestBody);
$linePost = new LinePost($HttpRequestBody);
//設定Token 
$channelSecret =  '64f2e4b2431a448b2c872f5c58a201a9';
$channelAccessToken = 'b31d8B9iAriRU9gT2b2LHKapaDFZzWga3SmlmHCMRWUsl5OplYXV/78fKWM/qjkVGX7W/ReVne/1S+9Q9Vc2bBtZsI6td4pb6sqL8MQWCNzLQPI2dh2S5tjEBN4s6+QRkFTXjCqaNTNUZYZ6F0C2cwdB04t89/1O/w1cDnyilFU=';
// $message = $this->parserMess($HttpRequestBody);
$message = $linePost->getMessage();
// file_put_contents('php://stderr', $message['type']);
// exit;

$QuickReplyMessageBuilder = new QuickReplyMessageBuilder([
	new QuickReplyButtonBuilder(new LocationTemplateActionBuilder('Location')),
	new QuickReplyButtonBuilder(new  \LINE\LINEBot\TemplateActionBuilder\CameraTemplateActionBuilder('Camera')),
	new QuickReplyButtonBuilder(new  \LINE\LINEBot\TemplateActionBuilder\CameraRollTemplateActionBuilder('Camera roll')),
]);

$httpClient = new CurlHTTPClient($channelAccessToken);
$bot = new LINEBot($httpClient, ['channelSecret' => $channelSecret]);
// if ($message['type'] == 'location') {
// $lineReplyMess = array(0 => array('text' => '500m內電梯大樓/華廈 共有108筆。買方熱門詢問 : ', 'typecode' => '電梯大樓/華廈', 'count' => 108, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=zu2QWY9dCESiLaflzHu5ZTM3MGI0MmUzZTBhMmE5MzJkNDQ0OWM4MTQxMTRhM2Y1NGQzNWU0MDg2OTM1YmFlMWUyYjQ0YmVhOTBhODA4YmKjFmr4lGl42Ov_SMVuvGN5QhEr6CNc8Z7lsk5uOhWBPmLon0h4WGv-tC2WK-HTlv--k34bWYBss6IEaY1ndZNyhxiEjHsN5EwOB3sS-WFEKzYJbHx_9xRmjrubT01X8Zm8I5SZizNJdM-0w86Rb2Kgdz_NL4uTvbM5_seDe-F1WqDXCbC9cStme_5BIZkArrZOtq7nSD3YCDW-QUfVE_k_eg_3VkBmesaxSUsj3uRs2zLTaHQNq8BOwyQ1sr0Q1CuAeVoioMoo5hdj2Rax0IbUCv8-W0qaBSFAfFaJ6JSfnHxO_kIWUihYKzNzuMzMaLPWtrr6m3gCSzILnRIyyS1B', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=v61yG2zK0KnU0GSnORDzsTNkNGY0NzllOTZjZGNmYjMyNjEzMDhlMjhhZDMzODFmZWUwMzg0NjA1YWI4NjFmNDZjMjEyMzhmYzYyOTM1Mjm5d8IfcbbXOKkD9eAMVm2lrD0xnVi6Ox8GosEYGLEdjQWNYKU7RkvkV6I6qFsmj_2tt4hsbuQfj1eZxyvhNlu2OxCv7ZMKUcqMKXoufrNGkyDeOtAou4bMb_nKwuvdgAbwnQcy5JGq3PDBk1shROa24CZcH_-QnEKse5F1VN1CgmrzvYl-_QKuiPZ-jBLdjyEGhwS2YFfT0lY5BLGwx0UjeTI_MUkj7Z2LWQhwAnEergHuDlOFNDnaFls9inVqQfkkKANFzJI-2pN6YR7_lwo5kgxcGnvUUyH8rNqwLLNSvt1QWuTo5_QBdg_j6h2s4AY=', 'searchUrlAllText' => '全部查看',), 1 => array('text' => '500m內公寓 共有46筆。買方熱門詢問 : ', 'typecode' => '公寓', 'count' => 46, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=PRWwfzxVxL4T2tAKtiO9lmQ4MTAyNTljMTM5YTk4MTgwZmRjZWVlNGFiNDUwODkyZmFlZTRiZDRmYjBiZDBiYzE0MmE5NGNlYTJlMDZiMGb7FT9mLaZaLOshY54-wwQpMau8x0G4vPKBXH-yMWTgytrxwXuROYeQuFOdEBlGAK8gJtLNA-IzqVYmdAfiJ-LmkLtaaJiJ7riXe_Zi7nNW_zM7aRlzEZBwr-ThdUcRe2060KStrb64vdF45URpWTvDT3tm_uSbGEVLm8ErgVKw_vl0smc7QxL-mMtFW9v_zlhoeZ5B3IlONcaOIalcBWeBZzhGSquqpwr0BkGAIUJh0DeruTXYSbkqWVJcNOEMc0DOpAeFluXwDzwvOtsFVEY-MeA5foBtjpYQ-Zj-jO3q4lkSoCGjfK5kYnebWM3Jg2w1VPXnFJEguzHSjVg7uFtF', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=zAniH4OYcWoFZK28fR5QRjA2ZDFhZjI5NmZiODZhODYzMWMyMDkwOThiYzdiYzVhNWUxNzg5YzM0OTE5MmQ0ZTYwNWM2OTM3MGFkZDdlOGUCu8I2fLL06msXxuQU-w_mmm3KffQM6Fflo0JZzx_3S4Q96TBaG3057-g14Vf2-Lvv8QCSA8f4N5j8uUYP-leZ6aaR2I8az1wr3De9T4Aox86tBzu-uuaQRsDdjh0DBgMBCCfsxcWVXk3RH5FL2c7IBk6oGxVFodB_DIwwatiGdKTVWL3dFwM5HcfIx3yz-wgOvtct5ktjnh2zF-BGrW-r1xUVUySA1ryXnFLSGSMP8uCh5uivYLgErpoeCY3Hs6CuuUq9Psyoi_CaO-I6KMeXudIn7eOGIFQaQ1Kucxcz2W70OohDZ4pAK_YPljW5Ems=', 'searchUrlAllText' => '全部查看',), 2 => array('text' => '500m內套房 共有4筆。買方熱門詢問 : ', 'typecode' => '套房', 'count' => 4, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=UK8XkGGgDS_g0bIqSzuC1DQxNTBhNGQ2NmRlODJhNDNmOTUwOWRiNzFiOTc4YzljODE2MjE1MzdkZjA5NTMwYTZkYjAxNWIxODhlMjJiODfPdvAufI16oiK7ndVXNIgmo-IzetY3sG2X-oPnLC_VzNzs4zGkstlb02PO1yiNv1T6vK55WLHw0Ka82O9UPWI4nv6iqfPbjinJXZI2taOT_wnT8rZmJDJ1nfeHECZzaDvPLW-IeAxIj36xcc3O9INhJVcXQOSoygCMz1hJgJvHS83_d85QEQUOtsQru849F11kQITSTUY0_cVDCdJeA8JIS-xr-Kwv1nFdTuF50o8Ahg2WMF9TlIo0dydktHGgsA8pKW07zk0_NeMOkZyHBZ17tE2lupcVgF1vrE6KyZtT-uocvWGcj_2gSkt6ftcwZWl_7U8hZHjsAnOWl8sR7qT5', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=wYA_wNFoliUAsCs1VguDlGU2NWU4YjAyZDI2YTkwN2I0NGNjNTg1N2QwMmEzMjM0M2E0MmJlNDZjN2YyZmY3N2JmMzE2NGQ3YWJkYWFjZGQhEZX_bhMsFHC9kCYobRi8-37KOYYbOtHg2xfMHCW5QE_bIIGTCRYcQgOyLnk4JNtnKSofDRmbkDai5w648nl75sck-XA2K4dCmmSiUMbm_eEDYXUVENM2GLOKbBFnlHEw7Z4PQh2wJfCCwxC0tdHV6-jfGFuUeOVcbCouljzeWTU29uH7qdjpW4gpe9d8tk0_gJgiyJXsnPXub7oIKIMasEoT5G3TL6UZwJ2vsMT_PzWqjJI1zG7B8Kev5TNB1BtyVhF4_oT5r0N6-Sql5Ai75kRytaBjqhNP41H8gXwjGMRdgk0MSMxb4xYnfJC9PzM=', 'searchUrlAllText' => '全部查看',), 3 => array('text' => '500m內透天厝 共有1筆。買方熱門詢問 : ', 'typecode' => '透天厝', 'count' => 1, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=cb0Kp6lhiioBcgNHixwV4Tk3YjkwODJhNjQxY2I3ZWFlZGExZjgyYTJhNGFjYjM5OTQ0MzNjODJlODE5ODBiZDMxY2EzNzQxYjgzZjI2MGJWjOmGS3wgbUtQLUHm-n7N_uo9IVIrXWQ6gxirdRvCKL0J_FO8EF5UugLxgtJPnK_YCCBtyXP0zE2TZ-VasfC5_F22CQNs_6cQ9t9LVaCenYjxMErK_quYsi7h7ZzfPUsuG85DdqQAisbxqoNEP1T0HTnNUZsW2ixtgEoQN5lc3BfT82umpmhpVK5NIw1L48rKCUv9ow636wCdeQKZxv2J4SNBZPr7OaC6h_F2jgBhX-SHCDDtolIrV179e9-C6m45s2U_-0Svi9JsbGTGD4tblaVHQxtTfuvG_fW0l0gLGKVSlhmVt6Q7IEKlUnZX9ac-hVgtMcKhtU2PKVZekG06', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=Q3k_Hnxa7paI_UAMp-37JWJmNjVjNTYyOTAzNzVkMWZhMTJjMzMwZGJhYzg1OTdjZDk3ZWNmNDgyNDk1YWI5OWEzNjVjZDc3OGI0MmFjZmIdzK8pixswLJJEeQTpElnsGA4VEMzVL53pW5nWy3LLNqpA81SJazVQ95x0_PsGWmLVJOiXh5RbgRGIm9C-s7gX1U_YNYU6tsb_QaV55wqMzUP_iScUFC3YIYIRDdm3NXeOJj4gI-xumL0d3EijOPBznNnEmxl6O2zwmJeJEP9VcqLrf7Rx9BBgn5Oh3urfcBY1zutHWSd372439tHTgZfGqYp6YpGgeXKXUgBLF9f1PzvLKPBMk1BHFmnbOEWhfrYG1c93-DCQNZbfv4uny-qDINEhjjNcHFR45RWmEOYYvH8DHDfmsvR6OPgjycXWzyg=', 'searchUrlAllText' => '全部查看',), 4 => array('text' => '500m內樓中樓 共有3筆。買方熱門詢問 : ', 'typecode' => '樓中樓', 'count' => 3, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=J8a0ys2SAzwPv7876C4DGTQ0NDk0ZTcxNjUyNjE0NDFhNDMwYWJkYzc4ZjAxNDU4OTI4NDkzZjUzMDgwMjc5MzFkNzg1NjBjM2Q2MGQxZTbb5-grSC13Ttz0Pz3P9UaYeVzfXqKqcbJ8vU0hXA7eErhswjt45wdp_oRYsGNSDCHKXDpdCXp67xnwxkb5xvzxWfYwdLOwjISYeB1xMZW-7HV7-c2VW80688LsFNS8EuO6kyNEHNxQCf2FFTP-Ach0f2TLfDOr0dTLEsqtbvCresikCLLLjQhgqnKVOXTKksdEAI3l2ekkgFuDB3s1fj33Zo38OGiJkw9c47hA2JZt-vxn2o0NR9jO6W1Npmx8fEiK3D8KkYGDtGM1T75EA-41UiL_YcToF7xi1fFIRD_49cV_1Qpqbv-dY71jdR55JzQsHHfixqaWZo3dzHsy6QdL', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=5ZgGwWnvoUmz4excM9y6BTdjOWUzMjkyOTAwYTg0ZGVkZGMxMzhiNjIzODZlMzZiMGQ4OGRhNjNmMDkzNDc1YmIzNDAwMmFmMzY0YmM1MTL6EbnUPBBvW142aRJK-vL_inR5QtJ1guaq-hGdu8OLOC4wVunmcnMU9j0KZbcch0QIJM-b8sCDK_4xIqPe4zZRsXrvKjpwcA09GDos0wx4hXzd4P6tcYUYjVSMJDd5e4-yuGTgnsRS3AUqR4a0j2njslkIFAquCEig6szM8wMTbMM2wB2nQnnJBSztDUu2HjjsIIZQpR7iMICXDdPiw0V6l1qzS21PCrFmAiHamj8JYyigsqLJxn0jAfBqG-BnvZaiPR3FwVKdYubwIc40igzn4AC1DPwctZpCs-GIOoGLPCcnbTahh7k045hwR19Ps5A=', 'searchUrlAllText' => '全部查看',), 5 => array('text' => '500m內別墅 共有1筆。買方熱門詢問 : ', 'typecode' => '別墅', 'count' => 1, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=J7iFp9OPRXVHbvXs1YT6vTczYTM1ZDRkY2Y5YzMyMzM0OTA1YTYzYzQ4NzE5MzEwNTYzZTljN2Y1MmQ1MTUzZjRhYWZhZTRjNWY4NmVmZDM9hQhSq6EIrNK18N96Qf259Xs3SPwDFApwypBzEx7qO31-xG5HL8NR_NjYYy-g7FLLKUYxZybcAgUrTealgdVZrpMp42kHN6eZN9tQeQebt9L1XY1lq-AM0_eJ0lx08E6TeegwSwgPG8NEAFcHqjLF3qDneAHaYjNWkYI6aN7FtVNoylmBB54wcu_PTjVB-fXOUCBvFB47n8D5IoCwOvtfN-IidVcdzdNI9cAIHtvjMt07JYQzioNCktW74eXvqZiJjVeAo6knJTvyyHXYk1QQh3eJo2Ku-O3bU6xE9cvSubIoR8kUcqyoOhWpQ5hgVBkEjA8k97ruYWfgJu9bBANG', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=7KOjc2ng45hzLeTx2SrZgmRiNjAzYWY1ODE4OWJlZWQ0YTFjZWFjMDVkYTk1NThhMzM0M2UwODY0MmFkODlkM2Y4NWM4Njc5MzAzNzg5MDQYPGLgh9oF9kKxa_Lg7OTEcTVnexeijFxvbrMeuCm0tiD7U37CZ96YB948XmkGTNC8oyQZDvQOe_X0EhcXmRMcsLv6j9aQRsyIeVpp38qwq_gY0ah3gTS3WZIx3pKmzwC3yvg0o2xBuwj7GD_8yFV7XQwT3M-Xi3eOazuJ_8maS9qPVt6sK7F4xOAgEHoogiPX-FGlg5pVKn58svzNKmnrwv45DZRIzhHgJ4fvyNhvcCF6wmuiU3j6E1HYOv7quY6N_iOPydTpzSHxBuR9bBb-MmZSNHovKbCjOoJEq-0_CGBZzG85mSBxJwjKWLB0Yik=', 'searchUrlAllText' => '全部查看',), 6 => array('text' => '500m內辦公大樓 共有24筆。買方熱門詢問 : ', 'typecode' => '辦公大樓', 'count' => 24, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=9ff0UeQijAoueMaEBiN6NDlkNDNjYzNjYzQ4YWU1MzdmN2VlNTZmMmU2MzNiOTk5OGY1OGY1YzMyYWY1MWJlYTNlNzlkODAxNGMxMDA4ZGbA1-K0fFNPiABIpehueEo0vMbN8US5VIIn-tqAEmIpPrnpd6iW4ZGyPm1RBO6xygj__O3hHd_xDNkYImN6HKVg1OMaqUB1mFa4xNLhuH1E2i4GVmhs2Dv0Y3qRiESuUkA3wNhi2STeDDy--xTV4WZKdwVnihpF8NDKwBDXO85Ws6GvPF7NjCnIBw8HFOZwJ7jF0zmKIeODVmuc6tPQDwHSHTn27lVEvTj9ZY-rFO9giu9Xh3bFQVZr4NS6qzAye0584BfuSGznmk9_1mBkouaGhKQjlEMqpQiRCLQ9zUUcuUv-tgkjwm7xPCQlbLr-lPsxh3fgY4y-232z0cLUbtBm', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=ec9HNcJMxtob3ewsGsDPYWVkZTZmMzAwZGI5YjU3MmJlN2MxMzFmMDRhMWYxMDVkODEyMjFmNmYyMTcwODBjYTE1NWFhOGQ4OWIwOWRkOGV-5bnqdcjOJHaykUQqEzpkX9viMPnvuIS1NSINc0nyfdX1xsfE7IMLDGIdiSDf65BisCd8zvWfHSXJAFAxOXqwGfizmCbNZFY454XCDJcrHUTCZY_Ki_Of-BmZni8mv_kT4AtnjK5m-E_P5avAGedgLmDypHvIJsZa2sh5XpmRxmTqPGyV8Zb5T34HOlRq730MPMOmfj9ZywP5d28EkZkHFt-9bSP37zdiUuxQft91OAloFifk1P9A7kdG1pymdshnMNTUnE-K5B1LUTN187KFW88XLRTO54J7v-YNi4rNh882eWI8A0-5GL4a_CzyLC4=', 'searchUrlAllText' => '全部查看',), 7 => array('text' => '500m內店面 共有53筆。買方熱門詢問 : ', 'typecode' => '店面', 'count' => 53, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=45h1JPzZgLcLzcZzqYb1LGViZGFmOTE2Mzg0OTEyYjZiZmUwYjI4OWYzMDdmYjFjODY5MDQzOTUyOTUxYTZhMmE4YzcyNjJmOTA4NTFiNDDPtBI1L6xZjizF_X3ZAb5R10MLCPyTxDxVk-Gop8B4cpK6OxwBM2O30EZBcWq7nXmbMYIdMfdm7MXuYEGXQyK4k67ly5mpaYxDec061gfdy-NZlY82k6C_QSTNMIILVtQGu-2Be6pukwjQBDttorrlbsT0tfWgJaEoDUtqIZhje72YXnGv3Ogrvdw83ceEVsuBV1Qr738JTueKVhFJ2pA4Ib3YUbs-1hTjIkAVGdcamC0wKL0tp38K7FwpwtY7WKEtDQQFKyeLjdD1HQ5IBXqK-Xs1tY_sxji93Cea87Ky3R7k3S9js0EcGYklN0MY_dS_k10lB4DIcT7caG9Fjcyk', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=lhrZE74bNg3Xm65SsfbUJzg5ZTMwMmI1M2RmYjM1ZTdlN2JkZGExNTA1YjY5MTQ0NjBjNGM0NGE2ZTJkZTEzZDQzMTI5MTFlMmZjZWFhOWGSBwh3Ql53SSPn51pBrZW9qhu1sMiykt4ZbF-j3xg1YOrasNKvAS3R3v-SjYx4mj-6rx4nveF8_s9XqaMrDqH1yKYzS6ehCB7vUI4-UZp_m_n0gp0smj_iN1OaM2TbWkRnsDsXbxIO8gsepn71-zAIsKU9jiFsqbqXX9FLPajHbZq_pMi_cViU1yUdMf4FXPdwgFexTb19aKZmtTSY8VtYOVa-Fuvj06_AmaQMqX9jVhqAmPotyYMQjLWvP1I0eI5BjjOL7pu5XaYS2V-1CseNybcVBvyL4HF07EjEauzCrbnVV08VC38AKbR47esq5Ds=', 'searchUrlAllText' => '全部查看',),);
// 部分沒
$lineReplyMess = array ( 0 => array ( 'text' => '500m內電梯大樓/華廈 共有10筆。買方熱門詢問 : ', 'typecode' => '電梯大樓/華廈', 'count' => 10, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=ejBt9vQgoUjQK6RaDdW4b2I0MGNhNjYyOGE4NTk5ZDk1YWFhZTM1MDAzNGU0YTcwYWNlZmMyYWI4ZjQwOWFkZTBjMTlmNDc1ZjNiMmI5MWIptbct-rOW-Mlxs8hv6dvaOTG19tJtWmj13pfbw1wVzQp636RGSL4RqcAlHfRJjcUIRTKFidK59ps0Nw0fz7HRg5Un9IyQWRARqoUqR2bXlP7V1-0g9xtYBg-euQa-yOmJGy8GKEKe0pQrgknioZkaxmzK6ytWFoSG4uib4bngcGbK9GV0TPGtzklsCDm_VB0-87-Tjsc2uH4YSY22FDVt4U9xsSRgVTTXM5NjOq45iH159VzIvr-QS0QC7FJp38X1gnx2scaxMMsYjIYvWLbAj8ijOFl7-_RzebdL5jwWqVL-kOxSkgmOanUwaVnY1zFhNS-Z7MleXN7AVOLRecKi66-nwaj41hjcWovyiV1lWSSb6wJ6W4JaCFigdj-mV9NVm7kS1nwntjZUPfCqIbea4H8j4iTHU7PBgtyOoxAUOlWllgspktZeaOO7TCPOuFIqdCc8QgV8BuOMvr7VLplc', 'searchUrlText' => '30~50坪 中坪數', ), 1 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=KfUTiVmAxPWbcWUPyGNT7ThmODJmNDRlY2UyZmNlMmRjYzY5NjU0MTJhYjkxNTU0YWI0YTg0N2U3MmM0Yzk1NTM3YjYzOGZiZGZhNjJkYmV_2CWwFblfoDgeVyYaooCW7Ea_aVmFeye6MCLHTnQBITA4LQRQPfocFPy81NONkkMib2y6_BECheaWN_FeB1HqpxDP52vkBrptYizFQ1gRREFc5WUYSZSOJQSI_FmpX4rEf93wjHV0xAm8IbWSZcmPBoTRZl-8EqZk8T1uTOgo4WFzIEpF4JS6nas6wX9FDPruGQCCT7SEH70yIP_lN7UM7g1T07Z6TVGTQyJmYLe-Iihi9swRNK9ftlHP4DNwokUxAJuWKVkQiQsYmBoWpEVSDPvOnAuMcFIVEzfByq0lbsEIk9G8dwvIxW2VvlzS9aADgZtMFXAw19FwFdn-hi3Qc0-r4tyyGYxWbI4NOgFp56QF03378ve6GK-KcQHZxd9c6ytCzl_12736nEkNr-iwwZff1L9VVi0fo1VVPOgIlkfQ4XCLPipIXysUEsNlqGDLIK2ugrOTMNlloXKtO-qC', 'searchUrlText' => '< 1200萬 低總價', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=a4ZYBVcA7_3DB67lp04PLzdkMzY4ZGZhN2VmYmViNzI1NDVhNDAxZmJkOTMyMTNhYTQyMmUyOTk2MzgxNTIwZmUyYWMzODQ5NDZlMzdlN2O_IkJEMn2il0W7cke4FJiahk4rHTFOjqb79ilYevjL-RWdZZgKPjZIqrpkxODFDc95X0F0Y30GlvI_xvXLcMpLwhVdAxBxJidokHqhWsdlEA2VsDUSAsovEyp0NrBcD4mNoBwEEznF0A_5f6aM4bg9h9PFkBXTI6Kc9HxT91V1WQSCJDWMdtcc97P73mDXZmtqLWpEfgHzxP38KihrUAWQyK2lpz6WMpgHiaNJKR0asvd2U-pRIpbbCoMqjNu_fsnnwKjMpm5ZicVqzfv-RGNbKTUl136qZkxM7FAIjn_HR8zi3BSgLDLg5ctAqkiEC_UbM15w3r0GMX51d2UV9603l7ebBe0hAJZUQVzcubN-xO7gUeQSh-AZd5KzIoowCjQ_9uAYEOUOZ1xT1e8gNG_aq5UINhWSpp06bYQoxjBG3EnmqHa4XDoYhNfJ-Dec3ws=', 'searchUrlText' => '全部查看', ), ), ), 1 => array ( 'text' => '500m內公寓 共有27筆。買方熱門詢問 : ', 'typecode' => '公寓', 'count' => 27, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=2W4WM5V6ZBctzWuI6cm_ZTgyZDlhYWUyMDAxNGYzM2FlOTBkMWU2MzExZmY5MTgxZDY0MWVjOTM3Yjk2ZGQxODM3YjBhYTIxY2EwZmI3NTIEnggkboefFkQALF2BT2uFKYk7NMbp-r-tJB6EBqS4nhbieAhq4qoJax52DaLwdkET0YDzunHw6HHvu3fHa8mXptsmgMsEtD5r9iN922A4mdaTAWlVMiCUhxRUuJ-xQJ_kAF7LzGyCWqjIQkFOJh4TiMxvamR7ReGKqDFVR5I8-rFc-ycGxqJCntWD3GAcjH4nmyqjn7Uh44EEgAcKYJPoCDBv1Jioro75zb2w-tZ1_ZDwexvAPyjnfDib3lC6bfcyg2bYPIDawGAFSr4kzJEmXdLPMTEwb6l6-KdPo6H72njTaT7XgYeM9RfiDV9qmYMgteXpKvJBf1IANZGnUUqeac17g0HM6L7qm3uIWRt094dt17xVMpH-Uj875BwTjFHtb79Njt2qwX8jxuT3iSlKw50CWgeTHSYa4ZqYXsajA5vbwvqm5Yq3aDy2NXfIuvVCNSNsdPcdCzPG8VBAKB70', 'searchUrlText' => '40坪以上 大坪數', ), 1 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=o72PPU1Z1HMreviUSwW2HGY2MjUwZWE3YzBlMjgxNzA0YzJlNTNmOTY5ZDlmNzlkMzE1YmY4YzBkMWFmNTZiNDgwZjQ4MDVmYmRlOTUxZWZnQWs9lhNOjpak9XLMMZL5tUmp8LrYQ9GmDUqawax6l-li11mwGTcQ0D58e8SmO5KVIyLQrGedZdlKA00uDJaafJQvsXfZ_KuPrWZE14UPSKDR_160j1pDwGlhSOEhicu5VBZDKKSknsxlWJOGLTqg8BgVB5ut1VGzhxC58fdJY9oKLONknXmJr_BhIakP_zBZenZF9ab1wQxITn8SNZ84UdzDp7LgipZahhgdS2r6ZsYDvcMZRfl7LmEXsRgBW1Ynmy8x9qPcESDkDgot2lxmk4k_zWYNsldn86o6lIYh0pVnfWc13sf5UO5LV8ocCE2J-JX9RmrBCHUStZHiMn4Dhs-GGoSC1OR0HjL0_TVdSJZA5tQtipt0I3Mt2X7i3FpWJKgbRlvDbo1_YRLGntkI-o89eaXAWyQNsqzOYHHzPzQxkKVkFA06kK-oNffOlMWCWsrPPFTPHxfVR4nW0cbu', 'searchUrlText' => '< 900萬 低總價', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=AkUEhX1fNYZgtPt5hl7egmUyMjU1OWVhMWIxYzE0ZjRkNDc5NWVmYmVjNDA2NDg1ZDUzNDNiY2U4ZmJiZWFkMjU3NDc4MzVhMzE1ZTI3MzG7eVDwyDS14LhcssVK1x4q1wI0Rx8XcaeHjOiraHlWLMvlAKooUCmRBimMz23H3fHMZTLYnRn7s-a8upZZyGtk9XYOuzYPGdcmo0iqh80_z7zZl3PfuyLsEuO_46aAAoInonYUFlsyaZCH78ZpkAqRBfWSOVQrzbWKwEpNTgXJbvwTwyPvwQNVBMN7tAj_NPGuiR7K-tcrre2dHHKWE_WL8Zf1Dn3YCXI__94LQ9hpQjhMylP6YDdNvi1ZDoVzKxBUxQIzzTq3y2-3Fxo_ZbcOp2sZ91Naj0H62Jom0Hdg6DT3iIyuZhKgWpBpPjoMUy8nklIxPmweqW6hwW02nh8r9YbPyZJqzIa_sjgQptrTgNQbsvJb0AwGLToQcpC26zFCvJYg-ciDeeXVudFvv8WbYI3zqFYKB8oDP30saCmlY67VKc-td9pmMG5iYBAbmQE=', 'searchUrlText' => '全部查看', ), ), ), 2 => array ( 'text' => '附近500m沒有這類型物件為您查詢 新北市永和區的套房', 'typecode' => '套房', 'count' => 0, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=9BGdBaZr16WZ53GyWA_lVTkyODg3MWEzMDFjYTI2ZDI4MjVhNjUzMmU4YWUxNmU1MzBkODA1Yzg0NGRhNTZmNTljMTM5MTc3MjY1OGM5MjCGrbhfYkOUw1YcDXRTZ1fXk8DuJb7aIvaFhYM5jL2ik8EejO_rdtQ_UED3e0u_tgS0z4kNl8rgDqsryOKUMzRoK5Lt3Cl8jZaZTt4AkqEN9Nz2FuD-hlypezMf_caooJ9nJZcgHaNCfvp0-EOQlY52pQ8NaHw0T3yUhJygGLw_VNIzRm2ubbeVFzD0UigOE82QOigAR32tQ5Vo969ru8k0o7UqFK_uatdPJvBKq7TGNTF5MI1USMCiso3sugCOGESuAl7baawhjYeTNwmr6CrP', 'searchUrlText' => '全部查看', ), ), ), 3 => array ( 'text' => '500m內透天厝 共有3筆。', 'typecode' => '透天厝', 'count' => 3, 'uriRely' => array ( 0 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 1 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=rbt42Mso0yaLheYKcSf_oWU3YjA0NWRhOTQ5YTgzZDc3MjNhMDVhZjcwZjVjMjRhOGNlN2I3ZjgzNjkzZGJmMDAwYThhMmI0ODkwN2VhYzirNlJ9uIBLKZ90EFgTnTxhr5fwkhYUMvoVvVZj-U_KFUj0A4cqMPWy4-IGmsf3nul1j1KDHWSzNuN0KDZhwyx0f3y1HSjqwcQwDCABSwc6XAF9EqxEDBmK7zLFV5EqOPrTMmnUUFd1Yp4B_LtX1bo0UWwmmmOvYiW4yRQYHx1VshYYCkQs3EdEJsME57sYW7UtMkNWKHYxlzXf6TwSfTGVmZ3dy-7tbV2km3AlVMKqXsY0bVIh-bE72iegmFYByQwnE7QuZIfEe5kXZYNIGvCU', 'searchUrlText' => '全部查看', ), ), ), 4 => array ( 'text' => '500m內樓中樓 共有3筆。', 'typecode' => '樓中樓', 'count' => 3, 'uriRely' => array ( 0 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 1 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=zyZDPcP3OK8DByr_QcKH9TUxMTcxMjU2ZDZhN2IzYzVjMTU0MjVjYjY5ZGZlMzAwMzMxNWViZjE2MDFjOGIxZGMyYjBiMmQ1MDdlZjM2MWV7qWgsT2apYu91goaS6QyWOuC16mDemMg94zrJ2gQEYM_v03m8pc-S6rkFwyVTMZc56N-iKzqbQCO-rbUoGqF7353r9TN82vG1NF6reCRsCrLUPrbzHyZ4uSHj03xCtbpSFttMC54Pd9ByLt3ncQQpmnNqqaY1JAfp9M1jAPdgG7i2Z1X6effpvz7Rtzy1dQE_jjkZnZY8YEeff6bbDQhYwnNA1b2mtZm1t8oShzZN0f7tzDNbmv650HLGAFLSiqqLhPzf2Z-FGXdBoLNlCtHn', 'searchUrlText' => '全部查看', ), ), ), 5 => array ( 'text' => '附近500m沒有這類型物件為您查詢 新北市永和區的別墅', 'typecode' => '別墅', 'count' => 0, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=diCzLNNIdDzfQHCUrjHUcmIyMjM4MzdiZmIzNWIwMmM4ZGRlMDMzZWQyNWNkYzk1NGQwNmIxNTYzNzE1MzgxMTI5MzE4NWVmNmI3NjkyODBqobtTysHq6-TWQbJKBHtGUi5mSvWZxobTN__wQwye77sg4Cz1AmKxDTU2KSBuDvG25uxbWIfpOvThjOOWqUmDv-GqXsZk1OrNfLtdzLEaxNIAUgKmOcXdeQ3jxj5NsK29A3Bn5QjXar-xeH8TZYF1TY-NnLz0F-jsptv_uAMJ9-6Dx9-pBaThocWhHvSwv4EQcb2yHjaYEK5obCLISyB9ICG9TcjR_-fi5n19viZqGkeYgXWWM3ex_ugJcQ9k8USlzxDWMiQs6jbP9b7nebDS', 'searchUrlText' => '全部查看', ), ), ), 6 => array ( 'text' => '500m內辦公大樓 共有3筆。', 'typecode' => '辦公大樓', 'count' => 3, 'uriRely' => array ( 0 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 1 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=TTsGjtwe5lAl9f_l4kSmX2NkMWUzY2NhNjJhZTQwNzBhYWY0ZDIwYzdlZmJjMDg0ZTMyOTIzM2Y0Zjg1ZDM0NWY0NTY5NmQ4ZDc5NzE1Y2UJcitdlbqbCG4KAo2Zxoh_hvR-a6Tj4ycHnPAnm6vFAGT9jqzzFhr4lNFM4yLGiwUnvsD9Bht02Vo7BX09Vpt__Hwhv48pJQ64yWbg9MiqWG_vU_6I5LrKDesW1LSApl018cvjfBYrkHATvNo3tV2Q3MWGxYOjMtzc2DXFH2H6tbsxUWPqOQlkF-kzf64hG5nTNjpBq8DJ5D0knWLtgVbLZZ5DFhfIZHIfZUWs2FU_sbAlcINI0nWVAdWcII5E2SMMqgfHjTNpwYIbBrTLRgYr', 'searchUrlText' => '全部查看', ), ), ), 7 => array ( 'text' => '500m內店面 共有3筆。', 'typecode' => '店面', 'count' => 3, 'uriRely' => array ( 0 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 1 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=w_LyGVNA23Hpupcxcgq_W2VkODQxYWE2ODg4ODk3MjEyMWUyOGU4NjFlMWRjYzQ5YzRmM2FjYmVhNjNkNjQxYmUwMWU1YmIwMTdiOGY0NWLT-ivOUQ-Z0odttW_m1KcKxuUdWaiBES84ATwaYQeyo_y1pbfPvDQc-ZTWsqE-mc4HnRxH5IwGKrHbITSuL4_b0801YwMi0pggR66ceimslsoS5Bw7vBeBTJ0nQILRdpNtgVFTMbTR1zbOUbw37WJ_F0iFicFp8ynPymkTaoDBan6RFNA5boUzmAKRKeDKSPEx5VRk42MXGyDWNp8REwgD0o1tEPkgDQWu9VpJu6-6GD5nUDeCZdPsS5j3knFiRuNQJ7x8zOxvqfTDxBB2Xsdx', 'searchUrlText' => '全部查看', ), ), ), );
// 全沒
// $lineReplyMess = array ( 0 => array ( 'text' => '附近500m沒有這類型物件為您查詢 新北市三芝區的電梯大樓', 'typecode' => '電梯大樓/華廈', 'count' => 0, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=-5tHqY5G01-TJxrw0MBVSmFhZDAwZmMzNGVmYTY5MTVhYjkyNjFhOWEyMjA2ODAxNDAxMWZhYWE3MDYxYmYyNGQ3MTI5MDEyODJjNTg5ZDJWqHUG9H8eTCBkwfOH5bmoZVk_wu_z0IcpSnj941usEYinjafkDaszzA0s-LPJIDQcNxuxvRf2Pu6rkoFINKR2LoTUpJb7ks_vJnCQ_gvbWKuAggZnGtuexfBHw-tmtNbB-EhLQJGBeUh-idDmsToiIdWLrPN6628LHmEX2_WBxgDELt46-VZ-BOdupkmer4GPcEPSn9HLyWqntMEmWVriBSHTczMAgajvi84XkY1W9dVMD3JaCEXiJhcVgJUhCDdAIkzFTra2b1UU6NvV_yl_', 'searchUrlText' => '全部查看', ), ), ), 1 => array ( 'text' => '附近500m沒有這類型物件為您查詢 新北市三芝區的公寓', 'typecode' => '公寓', 'count' => 0, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=1vf8A1j1YETZDTDWC5kh0jEzNmIzZjkwYzUzMjVlNDE2ZWRlY2EzZjE4M2IyYTZkZjA3NmI0MTFhZjkwNzhmZGU3YjFmYWY2YTQ0NDRmZDKrsJI1gigwIDOsbmlcNWbtCClyS7yt2b4C-4uu5q426hFfrFhwibUycbUzOaTU_ygtld2HiAM3uFo2EnbyUY08MHQibuHZAZmJOnaYoCKgWRzeXC1nd-fcIJKn5Fwb8hV6C_hNAHZyuJ-NTAxx_-fo9G7SUqrlKJBCfHDFtjMQWU_OdI7gfu-pUJ0bAoFXQTQHfjAB-A56KYPanbyU-oGQ_YH4eG5Mozduf_v-A2-aL5FfC2tAbLlT2ZTiv0anzfE-CsbnrSHE-XxpUqRPDe8h', 'searchUrlText' => '全部查看', ), ), ), 2 => array ( 'text' => '附近500m沒有這類型物件為您查詢 新北市三芝區的套房', 'typecode' => '套房', 'count' => 0, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=wT4wSc63mBIr_tO2D-qfL2RiOTk4NmQ2NTc4MjQ2ZDY4ODNiNTA2MmU4MzZlNTg1N2QyMWYzMmFiOTE0MDhkMTUyYTcyMTk2NjAzNGFjOWGU04PnE_xec9tScXuHnvKdnE70wg8Vvo-c80Fu6dyhEVv2uXAfrnjj5gfigU0cYD9-aK5VdyhRY1zgbtyarfWhIaoOhqSzViwUTmGCguLjmWc53Z4KLjCjvW6c0H6ICmRKzp2S1mEywP6m5DY-au-nqTLk3NcfxxYGq9pA6Ch9p2p7SRU2HX1otyZviVOok3fvJmIj6yIZPvzTW2tvBhbyFL7SKiG_MaotptMHpT4XoJCsGC1riBcWZU6vBUoGkbZvQ9-9fAW_Xn1ZBKcf6Hn5', 'searchUrlText' => '全部查看', ), ), ), 3 => array ( 'text' => '附近500m沒有這類型物件為您查詢 新北市三芝區的透天厝', 'typecode' => '透天厝', 'count' => 0, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=CPrAtqoWi5MJPRM9D9qBbjkxZTU4MGE3NTRmNmQ4ZjI5ZjljMTgyOGM1MzU1Njg1MzIxOGM3YTYyMGU5NmQyZjYzNGZkMTgxNDRmMTgwNGGGTkXHhm4R0E8V1uFGsxqxnYqrUS_qUIlX4m0LX_atMzNyyv4mdvzGtqN3uJf_IEp5WZKj6P6mM5GWrlkti5tNmars4SJGtUQOCaw_3Gcm-jHbj2LFqS3WWHAOOsRpQ82m9eo9wyi-LeBLXp7dhCojfYCL4LC9vl0-biDsvl-u7e07k6tMA_Hq9IzZlm48Sd0aUj1IMQ74i0W2QW7Ue5SIR0itVk8sjVt_zfX-5oMVZPZHmx5ENtLrKtfEGsd7Ut92WqIj_SCxboLfOkvrOd3H', 'searchUrlText' => '全部查看', ), ), ), 4 => array ( 'text' => '附近500m沒有這類型物件為您查詢 新北市三芝區的樓中樓', 'typecode' => '樓中樓', 'count' => 0, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=0ylldGDaVKqfcVA7motD4zYzYWNjN2UxZTEyOGRjNmU1NTI4MjkxYWZkMjFlMWZhZDM0Zjc3MDM2ZDA4Y2RmZGVkYTExYWExZjk0MDM0ODBveVoJ1lFxxmUcIG9lrJq6zrkdG06kbPN8eMu8f2B0xwI7Uq5RQnYviMr1MvlOtkgUsDVjNgDOJXHTjRBWcYHu0InDLhL_7xfBJmwmS8KEAM6YczpsqGLTqWlYb_7xH_Teb6RvDXjp_zcGd1NRJ1SHckGKSVeHJFMwaEj6CfHh778S4TYqLu36EecRAC1zurBKZYad4LJNcx4yPaeUFAqAxL2TMvNs7nzKRRLYk4U2LcHaEV1xn7NQMef6y9JPYtR_T0JtNg7ui85bHGJt60mm', 'searchUrlText' => '全部查看', ), ), ), 5 => array ( 'text' => '附近500m沒有這類型物件為您查詢 新北市三芝區的別墅', 'typecode' => '別墅', 'count' => 0, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=j1OjEVmgDnzIVMdWQoH5zWM2OGMwMWYzM2U4MmZkZDY1MGQ5ZjJhN2YwYTA5YTg2YTJkMTQ4ZGM5OWVkMmZmZDEyNTdkNWRhYzUxODBjZmJfIOuFjiyuyyhIQmWW7fi7jvy0RhBXuZrLey93qvGlhkr1oh6OvFRyjz5H3vaTWB_MgANHN6OZ2ZaV-KmoBPx1sjgqG4UZmV-pd571j4k7tFkkcWZc4N9VhcicBlBViH98lgAebtj4h-mv8pH63gstjaeRvqff1CY7ONatEOV60DjJv7Qqucg4da7SBHElTo8DfMB8_qjZWa4EXadriq6-321nx_evVD8e0kw97abM9M_zCi-Vpz2Xqpnq53MNTGYZYlDHYjbRH1m3tPRn40dl', 'searchUrlText' => '全部查看', ), ), ), 6 => array ( 'text' => '附近500m沒有這類型物件為您查詢 新北市三芝區的辦公大樓', 'typecode' => '辦公大樓', 'count' => 0, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=P0POZ0Isj5cto6_OJORyEzlmNWM3YjZlOTgxMjc4MTc2YTg4YjAyYjE4NTBiMTM1YzJhNGE1ZWUyMzZiYjk5NTA3NTFkMGE4NmI3Y2NjMmKco8HRKldOt_aZvCcw1Qkm5ZiCW05eeJ6aJuttS7TZY_afxHhP7EQLuX0wMsC9xXLXb_k0ECpMbP2LbgcA0o79KFawWGZdBldYXlr-qGAcZOTdJJsdzjWl0FyyKmWgz2I7G32pGFdJiBHnyw-W6Qf3y564rtAPFpm7a68vM0ClmUYq6HjemIg2iBktGIOb24xXMHd13q3mhfPKeD0MMH7YyQrVjXLq8B08C7GTaC0wcWywQO78aD7if_hXADQGsMhaonch2Shptqp2G2ep7nOG', 'searchUrlText' => '全部查看', ), ), ), 7 => array ( 'text' => '附近500m沒有這類型物件為您查詢 新北市三芝區的店面', 'typecode' => '店面', 'count' => 0, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=ZvZM-gGfkR5t3_bA55_6wjQ1MDM1M2E4NDk5YzE2NzUwZTA4OWViMmI0MjgxNGMzYzc1MjllMzQzNTZkOGI1MjU2ODJkNDk0MGIwMzg4N2UyhNALM2z42TrFLtxpnnC0GuF2vTmywFXUitiAI3fIMvyGk-VGBqwVlSvFqGT8vuw1rfNPjWs6IagcugqV5TweLOgzieIPsxPYR12GVpJToEWD3DwaH4fUrGA8JLq87YCQ9O-O2OMqx8y8ZGWLqIpMuQwVl-KlF8spA74J_29aCtBC6xVKAfigdWBEBDZlHxeX25qzDjHFxi5RoS9gPfSWTpucOo8bsKRDEJDglmVT5oGFKLAAlxAK9fDn17Zre19Iw6VBDTB3fhx1dQINzLlU', 'searchUrlText' => '全部查看', ), ), ), );
// 台北(全有)
// $lineReplyMess = array ( 0 => array ( 'text' => '500m內電梯大樓/華廈 共有111筆。買方熱門詢問 : ', 'typecode' => '電梯大樓/華廈', 'count' => 111, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=1m4_3tdO9gxTxPbls7MgDTM4YmQ1NjQ3MGJhZDE0MGJmMWY2MGY1YzZhMTYwYWFlYTYzZTY2Y2RjOWQ0ZjJhOTVmNWM1ODMzYmViNjcyOTHsXKcdcS8FSYWEcEC5VbcdEFLjIjsCnjzPz2SujHYuUqoVj5CE3hCeyRsn4h1EvHS7zEEQGYHk72RKSC-QcoQm90xPWyxWhodOdF10Auzm-P-Gm6nb1fz4ZHhJKfij_4ukdvjO15dFdiBJ4Px9Kq01fDZ-VpTRCed4mzTCvLu9Av75I8BaPk7gB8McaTbrCNZW0IhKxV6L27Zv3Jwom6yhfPvOKeR3hYxgupcfstfrg2YGpNVURUu4n6csWGQ9bL7m0CdnKqoQ67fkASNu78Hwx9ELb9ZRM7RS-XBkikCBJekwPv1k8m1otc1_KXtwcKyiTzva7qm_C0-UThSby6iFu8agdhfaINgwug2wNiQfdKKZx4OJzwiXy2fPdLGdGa5x3czhOn-XvsLLjOVdV28S7lMcqx1xd5S0_AYU9tQroXuspfwg_dSr9Z-G3u3mhDDjUITfYofpczx2TImlp3iU', 'searchUrlText' => '30~50坪 中坪數', ), 1 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=jTXTXMMg4NeznRjg_ocDiTUzN2UzYzJiZDExYjIwZWZmNjQyODllNmFlOWQ2NWI5MTVkZjYyMWM1NzI1YjE3NDU1Y2QyZTU3ZDdkNjAzMzOF1Ht7im33wm8QcM2IBmVhCjmHdDDq9hbVuO8F3VCDhB3j7ZOiu1ud0TGXzpPCemzU7I_pQnmTLFEvTjVzulGwyzWSVLbzpf2D6tWnoes31_YG-ZunOJC12vQVhpMdRpNgIq67ftznZealkkThqrhobvXvBcw-Yo7mGBhV8JUBKgQwJievUODxyOEgHEWz1Wux1i9WwAOoLAomkhcV4CaoB5aIIi3cTae-wX4YvWvzbH6bpaxNMxcYBcV_Cpaxaz0oynj8LJ_labHw-evyo5FPztoDkH6vrx7bC3_mRO6117BtkY8WX3ovi69rwPOVP-kE2yv_vKgmPtok-VpfYwniQPu8cnZ9L3ew12SxFXrvfalZHyDaXAJ7d9WHX5A_oYny5VqxVX3FifiDfZ3Fpp_ZgUfy-IS68JGattEB6BcXexceobZCCX1gBDAf33Hpin22AzPFoUrpCuj2IW8W2NSn', 'searchUrlText' => '< 1200萬 低總價', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=QCWc32hL4NPiYa5r9Dwl5zY5N2RlMzkxYmIxZTczZDQxMTkzMDJhZWY5OGI2NmYwMDczODkxZTI0ZTZjY2E4YzE2YjZhYTdlNTZlYWJlOGYDWVXBVgtoOTdJjuaaPxMRYv4gbE6Sw82ou5lIFGtxACqZSwrMraXa-0OtNU1Qw0hxklU-g-E2Dhupn161izBHyNN_mQk1nsqSI3L-d0f-jOC3d08gcZ1yFKCfnA-1g-K7L3HO94z_bdv9nvmJt-cBml2g-dFDtN_2eVoi6jVACUmKa0GQIeNwvem_3coVe-ZAbvynJe-XTeigFxZ25pfYkM-vKqeknSVgFYyeQPJkMZhFJ0dmdXX19AFNfXeDqfww0jZVMQisGcZqKLVueONIXC_NDtRB4EwVAwRJTkGrxhp5JdT0DBBJq3IsMa3ltg17aeKQFQYz7NF4_rj6MvZ8d8ROSAPx6dfBUV6q1om6OfbxqQJ1nlkcJHPNCVxNCf3Fyh5f6-u9slpo21uyWRWSzTRvJZLyJSeVF6rV1RpGU2DLEj5vOwCUCzBYFPwhInQ=', 'searchUrlText' => '全部查看', ), ), ), 1 => array ( 'text' => '500m內公寓 共有48筆。買方熱門詢問 : ', 'typecode' => '公寓', 'count' => 48, 'uriRely' => array ( 0 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=CUYLHxY9brZ3jO2GvO2DAThjMGE2NDY4NmQzNjRjNzliYTRmOGNkM2E0NjQ5Njk4MTVkNjc0MTk2Mjg4NjViNDY3ZTllMzY3YTcwZDdjMDV1nWwhGn5gVKfYfAKVLYmz_FdZzxSihQ4aST9NGAoxKxCidy7qkTtRsfAT_qD88zPXcBWBh6OZSOJH2-dYEnTno-Xkq2LQHIfsI12HtZndMHBIEOxltcfF7KivbUF5YMsiQzNfvAErOGZMhdLPADhOwb8hTh2zS5OUsUCCd3cAzNEdTuU4pavuDVuKb6HPMXOhBdw1cKTBAUUyrAdoWHdasJKRjhC00suBfTFI2i_g7y9bXpNcDRV-GHUX5K5T7GYt0RM9ir90ZJReT04Timc87UvIbvYQ8BEMtqbAH9B5LW4varyta0_78EIl8YhfgRGj0NfC-rxdzckZL6ghtsQVPO28kCjiZwMIzDdrXRfh6V1ZtobcoVR6CTAJEP1Kw2BW1ghTxY6cF8zZVgvpStnmWxLJ9vbLl5uBEffEpV0y0Yh9vAVv3M4t1HXCzv2CXiIeDD-f1stvIoySARS-gQ0A', 'searchUrlText' => '40坪以上 大坪數', ), 1 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=RS9oM9vslcQQOM8JkxckTDk5M2JkNzZhYzA5YmUzN2U2MjMzZjMwOTYwM2Y2MzZiZjhkMDkxNmI1NjdiMDJiZDM1MWJkYThkZDIxMzFiYzItUWRNNAsRHO_uoYlKedqAuyPxaQwTGXk9d3SYuqyYvxwYhcn82gGRRkkk4PcyiOaiYXyxmP5MS5Svg733xTguAiWWiWclm92rn-0mqO0xt-Q08L25XJg0cgmwXrYahRrVgViu4WEyGOcTHd1yklSGI9UDYTkMnyr5vaK8-otfx8pUKDk2hFcuzDszJGtMezuG17293YauSjn34t5jDhHIGr6hjJnnffYiCC626EzGC-6CGduS4o4pa3bsVi6OKNKu2dZGPJ-oNj06yNcHKQzBrIPRPy-N88_yWj3m2aLn96bVuCVgUO8IXgfHHrZpafK0-bieHoWA5_GjSzPWCowCwugQBudO3ZAsu7TNSYx3qiRMgmp0ApO73f-YpA1qREez9Imq4aJrQ1CE13hgozWA1yB9Qm7sBPp8ve1NHz6EZlpRiKivC-hHFnIeGdxkDcBVXfNYSN-S_G230J_KdT2i', 'searchUrlText' => '< 1200萬 低總價', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=gEKnr4U6d1N7lRddkHAr4WY5NTM2NWM4NDk1MTcyMWVmODIxODg1ODU4ODNlNzBjNjQyMDQwN2IwMzViOWIzMWNiYWFjZWEyMzQ0ZTg1NWLZTteXlR2x-gGt2WyGBOWmJZ0sljbu1IusG6HMVg-CXBHosqv5lSdJKr5Tmqa5lGJI4gcBeqwL8sIcDMGBrNpuUyhmNNm276uQGoiPeWNS6q1uH_stLSFOLgjlav0Ib_W857ZuNNFjL2UZk4y-QKDXcgB7LPwuXT_hkfFRtuTAQb_hIfwI0WkTrny0u2gZRzUAxq8bLj_pAg6MzQ-_5U5RAvAOZk58UnBNoOJkIJAQHHyzbkD3ja43oEdU23M7MdHdzV3uQGhVIh3al0uM0JHvIEDc4Nq7roqPbEKuYas5moUV32JOeVUNA6g2dLjnEIpYGAWIZVDIZLjtins4viDypEOgucNRID_SfzdAFfSixxPAXc0g-x0A_oWzef_MnVsHbZLvGBW7f4xm6TtCmS_2CWfDU3sOfEGtPgS61nENlh7cX5qU4FWPiNT0Fq7LqxA=', 'searchUrlText' => '全部查看', ), ), ), 2 => array ( 'text' => '500m內套房 共有5筆。買方熱門詢問 : ', 'typecode' => '套房', 'count' => 5, 'uriRely' => array ( 0 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 1 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=eBDWSD54wiLiPrNo3HrY0jMzZjc0MjRlYzgxNGQ1ZjZiMzhkODhkZGZhMmMzODFlZjFjZmRkZTc0NTI0NGI5NjIxMDQ1ODA2MzU4ODk0ZTgW-AA4e7n36Fk9F6MzU0-dKan8389lfLniepbdueXk-ef_1OJNjSbM_X-iEABNOuCV19yBd-XDoLZ4m4iPI2eHvc-uX672_3yeP6GWnpPZOpzhwdceXh3gx_VklBDs7tRkHC0Eda9sJz5ZuIbNU1kOE2chmUcxoe8O3m5t2gUh6mz1ihp_tKmO6hpRceVHmqUj1ptcEH0ZO6xIKz6MG1Av3NIVoB-GW0rkntUnYJziGocZC-LwuK3g1xZlL6o7_2gAWexSGBaBsE59NqL2J2wFSrRlDBPuScXO1YS0yUFFBeXnvK5hzhn28oWByh7IA30ZvPxwDxDiifdLob-TemziQQKWfZSqP3i7ZlfH1zKdLcSg06kzjxuZocQCgxoT4pZ0TaTzFdOCN2RNhkS0rIIGbbSR_bCX5AY3oX2638lGPQCSvH5BKzuSNESgPUlrMbIhKMMxVLXTPDdGVg7A6rM0', 'searchUrlText' => '< 1200萬 低總價', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=AXowJkPl5fQNB7FGZx8O9zI1M2NjMjllMTY3ZmI5YmNjM2M1ZTUyMDBhZDFlZjc3MjM4YmEzZTVlYzhlYzUxNGJhZTRlMDdlZmI2MmZjMja9w_KkLFxlYQudTkiqnnXE6l0oOdPl9q_uztCmnXH67KIrmtQ2KOz04RIq0AiUgjCLDmNYzRq-XMWAknk0zWi69l4Bj0CcZurniKnhZiYmAvyf5SLNk2exgieziP2CyYy3AV5u9Q9ZU7H3yb8RmdSppqCC4RmULEZq_ZXfTuv0b26YIPNmCL3ctZLkuXvEsdjhLaP1CcGtdCylZEZ5z8Da-GhQcXv4CEvOm22xZteXsQQZAE7WXeJ5oPSP9iBn3b6Ic4UyZG_BwRDryj5l1jlsgI4QvsKRQRGyw4ZfADnDJ7mPuggdQrZS3pusaHXM8BMpruk4Qrv8FKfFhD80xTm_2dAhSLeqJQpvQbfgUeyRb2SELGDL9jK9eh9GFsgewv7-38dEOlh3EKOQIeJnu9_HaK_aKJ0MN_y4tXlU8jLt8FhjQpVi-07SbcW5vi2m_KE=', 'searchUrlText' => '全部查看', ), ), ), 3 => array ( 'text' => '500m內透天厝 共有3筆。', 'typecode' => '透天厝', 'count' => 3, 'uriRely' => array ( 0 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 1 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=QNC_DK-Ewg679oj6MuRQ4zg0YWJjYWIwYjIwYTcwMWY1MTE2MTEyZmRmODllN2U4ZDY1NGNhMzU2ZWI4NGMzN2E2YTk0ODI0YWVkY2M5MzVR6aNTKFxix2QTAPjcNecSfmt5LS_iTr1QyGIl-OjusJl6BASe2ylV_S-RPiUdCHmLLwtcINbHfWcl2osZKgR0SGOsChv9TzLnpOlc0rSPLgjHR20P3cfWunfsWBsKmZnU0lginaFVzotGaIZxvo1LCRAi_xXgFZNzIPb7Jc5jDlyHhSq7yT0k7DY51S4KK1ooT5MnUVTwS5Iyp-DIWEO3DTdp9FQQuz_ZwlPH3Wgm_QGB2rZsOU-1Pqy0LOG8WYcm45MVtYksNAtvVakxP9x6FRUzXwlmsYEak7yx48bumrye7srPtQh7m64k3kjy34uHPOp2kj1vBYMN78DPIb_2juHYH2tkN3WWuloD5qE0vw5xQy91gVlzue3Z8WlxT6lOOPuB9lm4x-qlJgP4q6GHGYlMje8BBIqNP7rj2h-iNTG0DbkzmCBQzGrVtO-3z0k=', 'searchUrlText' => '全部查看', ), ), ), 4 => array ( 'text' => '500m內樓中樓 共有3筆。', 'typecode' => '樓中樓', 'count' => 3, 'uriRely' => array ( 0 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 1 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=J-XBsDuDv9moKpnb_IHgfjAyNzViNmQ5NmU3Yjc1MGJmNjFjNDRkODhmYjFmMGVjMmJkYTViOTk0NTVlZDcxYmFkNWU3YTNhMTVjNjNlZWEhOSNIxKZNC0C3qW23_v9EH18O5_sHg3RzwOIwI2GRbwBnEk4cUz4T92jcVDQOyO0Tq9p7-rlKhu4iub7uTJRoT2B8zDW6-xboeqR6sH38zIKKd1nXKRfmvOLrTowyxfxiiFzM-a0o0XDoSxOygGjbEtsSezMwkvDcwxfxJZSCyb_MOwG8SUP4krTld4dX84WDtrbb-VvliZW37vocnuARmye_XN39hryqjazHCiMu_yO0F8Q-oOoMoafImoaHdK7vcY6rrB1o1TPkvEF9jXJts5_Dfkw0ewvqgm3z3NeLSJhS3emx1Td7RGOzZlGbz2GCE0ElpByW4Cc5aHLteehb1OSqJPnKyp--iCa4NgKJUS6dPm4A4PPTnQzbiAj73T0EDChhgsIS0vjPiu3tphnf5vyqdKy5UUVP1X_IWsTnn4Rlm33_fGGlFqKQ2hKL_6U=', 'searchUrlText' => '全部查看', ), ), ), 5 => array ( 'text' => '500m內別墅 共有1筆。', 'typecode' => '別墅', 'count' => 1, 'uriRely' => array ( 0 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 1 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=wPzQHzxUqYE8uwRcicvjvDk0NjBlM2JjMzA1YzMwNjA1N2VmZGY1ZGVkZTM1MzNjMjY2ZDg4ODU4NWRkYTM2NmUwNTRjYmMyYmI3YTFiYzYTv2mN7oqX10SyT18LFOypRNvF12T7gQjJCSLYF6L9hwHfuoSEN25BE8B-lgszvv5P7X_Bd2qEiZUa4Zt4-3ehGCsUIXjzAMZG6FrJ62L6ggoCgqeh59opUaxXjFEOgZFg49JpsRm3CX9DVPw4sscOA6SxSebu7YzquDkCyB6yPz0z5x8lUp2QDfEYmu_p2Xn5esKDua6tc3MCpM2VE51URcv-cMhviFH6lxGOQOXtY8sC2d7sTVgW4M7ExKPpzvbb4338zGbaKPP9q37X8ozds5vZ4bXHEYyaljxjDhW6JwFPUqNG5TIKldWTwEyqTzcQaZIEx8aOflToqYIERlIRMin6n4hEhgeHqSWfTOvtrd5nARRd9IcXWVN8RzEkqxFCw1ISSu6TKXfxcqlkaovzyfRmMv-Xgo_oG3CQxKY6S8EeaN6pOZlNHwtKiGcZVpg=', 'searchUrlText' => '全部查看', ), ), ), 6 => array ( 'text' => '500m內辦公大樓 共有15筆。', 'typecode' => '辦公大樓', 'count' => 15, 'uriRely' => array ( 0 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 1 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=nZXNDyxPvHICUk8JbyzIrTdlZGQyMzcwODQyNDBjNDY0MjZhMzE3NGQ4Mjc4OTFiNmJiMmJhMDM2ZTNhNTI2ZTQ3Y2EzOGZkOWFjYTI5Y2atpWGY772221brmvV4Zzy-MfXyG1EDvmmi_75Uy9GQKFTgMyp8MOvop43WsGSYZSImTQAsWDeFIYYbe5PcJjQMVP-El6QWMrUAIOyPxZEkuGhp7nv4Tr6Yyh4cZ8lkTJo84SLgEpTbxeInoEZHWEv08g8ji3rOp_HGlCApDWp_dpJ7KIi0uevHBqH4bCTl7XyVl7W1O6I0tm-xl986LLID5BjX4AvyzgxutHaEulQ9ZNhp3ECcDwhUC3GSb8QCadMeRP7nCbKFXBZBltLWS53WXTQEgrKF_2yc1AITt8ixDryxUniD8CXJ1LWGt-NdC722uHMXTpciOrwBc9wbJPIvQ46g3B6LkzmYs--3v0pEc9nXEuaYUg2B3ONkLmmjTBTdgVOZ63cwpnXWxLWZAFZXJIA4fTsCFV-CMjEz9iWQRI_Z_hZ2aWSxVKuMRNAfryc=', 'searchUrlText' => '全部查看', ), ), ), 7 => array ( 'text' => '500m內店面 共有63筆。', 'typecode' => '店面', 'count' => 63, 'uriRely' => array ( 0 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 1 => array ( 'searchUrl' => '', 'searchUrlText' => '', ), 2 => array ( 'searchUrl' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=wGoqiBBURjfOGLcI7sbSQzcyZmY3OWI1MjQ5YTM4ZDdhOGU0MzNiYzY5YzhmNzg5ODE0MDMzMTRhZmViOGEwNTVjMTI3MjEyZTZmYTM1OGGz3dv7Ko2iZN0FLjqy8J8OhqQHFvOStGH589tydKObkBCPBf5yLKhZfzEUysLL8fMo5N43YPeOUl-_iElM4LKIEWWnEbBHzc_e156K_ont6_qB-SeYEnbgCmflsgHQxc9avPVzChwwAn2EsZNmJrhd7lKW5loReDHYJczp3_rkoRckQMXB_nGyiDPvAPMOY6MJMBR5hurTq70IHKfQhU74G_nDHenrZ5neZq4G6CKJDhihbGZQl29mKpVboc-94F-6-Tw7TArHt6-soN8iOAWlWadOL9oSvqiUjwBKOBLR8waRHZFDpFq1HmvvT_GKhu33WtgmpXRxvc9e7j69IDjTpWt5x7rFPSaqTX-MaQDd4PDoCCVS4xdjzVDoGu8q2XqCL71jaM51lYEIjrz3oqIwySwGUn5VIIvE1BDzSEpkE93Vy2TkyDpkvoCuj_APr8Q=', 'searchUrlText' => '全部查看', ), ), ), );
$CarouselColumn = [];
foreach ($lineReplyMess as $key => $content) {
	$UriTemplate = [];
	foreach ($content['uriRely'] as $value) {
		if (!empty($value['searchUrl'])) {
			$UriTemplate[] = new UriTemplateActionBuilder($value['searchUrlText'], $value['searchUrl'] . $exBrowser);
		} else {
			// $UriTemplate[] = new UriTemplateActionBuilder(' ', 'https://www.rakuya.com');
			$UriTemplate[] = new MessageTemplateActionBuilder(' ', 'empty');
		}
	}
	$CarouselColumn[] = new \LINE\LINEBot\MessageBuilder\TemplateBuilder\CarouselColumnTemplateBuilder($content['typecode'], $content['text'], 'https://i.imgur.com/VKihAYW.jpg', $UriTemplate, '#FFFFFF');
}
$Carousel = new \LINE\LINEBot\MessageBuilder\TemplateBuilder\CarouselTemplateBuilder($CarouselColumn, 'rectangle', 'cover');
$textMessageBuilder = new \LINE\LINEBot\MessageBuilder\TemplateMessageBuilder('CCC', $Carousel, $QuickReplyMessageBuilder);
// file_put_contents('php://stderr', serialize($Carousel));
$response = $bot->replyMessage($linePost->getReplyToken(), $textMessageBuilder);
file_put_contents('php://stderr', $response->getHTTPStatus());
file_put_contents('php://stderr', $response->getRawBody());
exit;
// }
// $lineReplyMess = array(0 => array('text' => '500m內電梯大樓/華廈 共有108筆。買方熱門詢問 : ', 'typecode' => '電梯大樓/華廈', 'count' => 108, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=zu2QWY9dCESiLaflzHu5ZTM3MGI0MmUzZTBhMmE5MzJkNDQ0OWM4MTQxMTRhM2Y1NGQzNWU0MDg2OTM1YmFlMWUyYjQ0YmVhOTBhODA4YmKjFmr4lGl42Ov_SMVuvGN5QhEr6CNc8Z7lsk5uOhWBPmLon0h4WGv-tC2WK-HTlv--k34bWYBss6IEaY1ndZNyhxiEjHsN5EwOB3sS-WFEKzYJbHx_9xRmjrubT01X8Zm8I5SZizNJdM-0w86Rb2Kgdz_NL4uTvbM5_seDe-F1WqDXCbC9cStme_5BIZkArrZOtq7nSD3YCDW-QUfVE_k_eg_3VkBmesaxSUsj3uRs2zLTaHQNq8BOwyQ1sr0Q1CuAeVoioMoo5hdj2Rax0IbUCv8-W0qaBSFAfFaJ6JSfnHxO_kIWUihYKzNzuMzMaLPWtrr6m3gCSzILnRIyyS1B', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=v61yG2zK0KnU0GSnORDzsTNkNGY0NzllOTZjZGNmYjMyNjEzMDhlMjhhZDMzODFmZWUwMzg0NjA1YWI4NjFmNDZjMjEyMzhmYzYyOTM1Mjm5d8IfcbbXOKkD9eAMVm2lrD0xnVi6Ox8GosEYGLEdjQWNYKU7RkvkV6I6qFsmj_2tt4hsbuQfj1eZxyvhNlu2OxCv7ZMKUcqMKXoufrNGkyDeOtAou4bMb_nKwuvdgAbwnQcy5JGq3PDBk1shROa24CZcH_-QnEKse5F1VN1CgmrzvYl-_QKuiPZ-jBLdjyEGhwS2YFfT0lY5BLGwx0UjeTI_MUkj7Z2LWQhwAnEergHuDlOFNDnaFls9inVqQfkkKANFzJI-2pN6YR7_lwo5kgxcGnvUUyH8rNqwLLNSvt1QWuTo5_QBdg_j6h2s4AY=', 'searchUrlAllText' => '全部查看',), 1 => array('text' => '500m內公寓 共有46筆。買方熱門詢問 : ', 'typecode' => '公寓', 'count' => 46, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=PRWwfzxVxL4T2tAKtiO9lmQ4MTAyNTljMTM5YTk4MTgwZmRjZWVlNGFiNDUwODkyZmFlZTRiZDRmYjBiZDBiYzE0MmE5NGNlYTJlMDZiMGb7FT9mLaZaLOshY54-wwQpMau8x0G4vPKBXH-yMWTgytrxwXuROYeQuFOdEBlGAK8gJtLNA-IzqVYmdAfiJ-LmkLtaaJiJ7riXe_Zi7nNW_zM7aRlzEZBwr-ThdUcRe2060KStrb64vdF45URpWTvDT3tm_uSbGEVLm8ErgVKw_vl0smc7QxL-mMtFW9v_zlhoeZ5B3IlONcaOIalcBWeBZzhGSquqpwr0BkGAIUJh0DeruTXYSbkqWVJcNOEMc0DOpAeFluXwDzwvOtsFVEY-MeA5foBtjpYQ-Zj-jO3q4lkSoCGjfK5kYnebWM3Jg2w1VPXnFJEguzHSjVg7uFtF', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=zAniH4OYcWoFZK28fR5QRjA2ZDFhZjI5NmZiODZhODYzMWMyMDkwOThiYzdiYzVhNWUxNzg5YzM0OTE5MmQ0ZTYwNWM2OTM3MGFkZDdlOGUCu8I2fLL06msXxuQU-w_mmm3KffQM6Fflo0JZzx_3S4Q96TBaG3057-g14Vf2-Lvv8QCSA8f4N5j8uUYP-leZ6aaR2I8az1wr3De9T4Aox86tBzu-uuaQRsDdjh0DBgMBCCfsxcWVXk3RH5FL2c7IBk6oGxVFodB_DIwwatiGdKTVWL3dFwM5HcfIx3yz-wgOvtct5ktjnh2zF-BGrW-r1xUVUySA1ryXnFLSGSMP8uCh5uivYLgErpoeCY3Hs6CuuUq9Psyoi_CaO-I6KMeXudIn7eOGIFQaQ1Kucxcz2W70OohDZ4pAK_YPljW5Ems=', 'searchUrlAllText' => '全部查看',), 2 => array('text' => '500m內套房 共有4筆。買方熱門詢問 : ', 'typecode' => '套房', 'count' => 4, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=UK8XkGGgDS_g0bIqSzuC1DQxNTBhNGQ2NmRlODJhNDNmOTUwOWRiNzFiOTc4YzljODE2MjE1MzdkZjA5NTMwYTZkYjAxNWIxODhlMjJiODfPdvAufI16oiK7ndVXNIgmo-IzetY3sG2X-oPnLC_VzNzs4zGkstlb02PO1yiNv1T6vK55WLHw0Ka82O9UPWI4nv6iqfPbjinJXZI2taOT_wnT8rZmJDJ1nfeHECZzaDvPLW-IeAxIj36xcc3O9INhJVcXQOSoygCMz1hJgJvHS83_d85QEQUOtsQru849F11kQITSTUY0_cVDCdJeA8JIS-xr-Kwv1nFdTuF50o8Ahg2WMF9TlIo0dydktHGgsA8pKW07zk0_NeMOkZyHBZ17tE2lupcVgF1vrE6KyZtT-uocvWGcj_2gSkt6ftcwZWl_7U8hZHjsAnOWl8sR7qT5', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=wYA_wNFoliUAsCs1VguDlGU2NWU4YjAyZDI2YTkwN2I0NGNjNTg1N2QwMmEzMjM0M2E0MmJlNDZjN2YyZmY3N2JmMzE2NGQ3YWJkYWFjZGQhEZX_bhMsFHC9kCYobRi8-37KOYYbOtHg2xfMHCW5QE_bIIGTCRYcQgOyLnk4JNtnKSofDRmbkDai5w648nl75sck-XA2K4dCmmSiUMbm_eEDYXUVENM2GLOKbBFnlHEw7Z4PQh2wJfCCwxC0tdHV6-jfGFuUeOVcbCouljzeWTU29uH7qdjpW4gpe9d8tk0_gJgiyJXsnPXub7oIKIMasEoT5G3TL6UZwJ2vsMT_PzWqjJI1zG7B8Kev5TNB1BtyVhF4_oT5r0N6-Sql5Ai75kRytaBjqhNP41H8gXwjGMRdgk0MSMxb4xYnfJC9PzM=', 'searchUrlAllText' => '全部查看',), 3 => array('text' => '500m內透天厝 共有1筆。買方熱門詢問 : ', 'typecode' => '透天厝', 'count' => 1, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=cb0Kp6lhiioBcgNHixwV4Tk3YjkwODJhNjQxY2I3ZWFlZGExZjgyYTJhNGFjYjM5OTQ0MzNjODJlODE5ODBiZDMxY2EzNzQxYjgzZjI2MGJWjOmGS3wgbUtQLUHm-n7N_uo9IVIrXWQ6gxirdRvCKL0J_FO8EF5UugLxgtJPnK_YCCBtyXP0zE2TZ-VasfC5_F22CQNs_6cQ9t9LVaCenYjxMErK_quYsi7h7ZzfPUsuG85DdqQAisbxqoNEP1T0HTnNUZsW2ixtgEoQN5lc3BfT82umpmhpVK5NIw1L48rKCUv9ow636wCdeQKZxv2J4SNBZPr7OaC6h_F2jgBhX-SHCDDtolIrV179e9-C6m45s2U_-0Svi9JsbGTGD4tblaVHQxtTfuvG_fW0l0gLGKVSlhmVt6Q7IEKlUnZX9ac-hVgtMcKhtU2PKVZekG06', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=Q3k_Hnxa7paI_UAMp-37JWJmNjVjNTYyOTAzNzVkMWZhMTJjMzMwZGJhYzg1OTdjZDk3ZWNmNDgyNDk1YWI5OWEzNjVjZDc3OGI0MmFjZmIdzK8pixswLJJEeQTpElnsGA4VEMzVL53pW5nWy3LLNqpA81SJazVQ95x0_PsGWmLVJOiXh5RbgRGIm9C-s7gX1U_YNYU6tsb_QaV55wqMzUP_iScUFC3YIYIRDdm3NXeOJj4gI-xumL0d3EijOPBznNnEmxl6O2zwmJeJEP9VcqLrf7Rx9BBgn5Oh3urfcBY1zutHWSd372439tHTgZfGqYp6YpGgeXKXUgBLF9f1PzvLKPBMk1BHFmnbOEWhfrYG1c93-DCQNZbfv4uny-qDINEhjjNcHFR45RWmEOYYvH8DHDfmsvR6OPgjycXWzyg=', 'searchUrlAllText' => '全部查看',), 4 => array('text' => '500m內樓中樓 共有3筆。買方熱門詢問 : ', 'typecode' => '樓中樓', 'count' => 3, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=J8a0ys2SAzwPv7876C4DGTQ0NDk0ZTcxNjUyNjE0NDFhNDMwYWJkYzc4ZjAxNDU4OTI4NDkzZjUzMDgwMjc5MzFkNzg1NjBjM2Q2MGQxZTbb5-grSC13Ttz0Pz3P9UaYeVzfXqKqcbJ8vU0hXA7eErhswjt45wdp_oRYsGNSDCHKXDpdCXp67xnwxkb5xvzxWfYwdLOwjISYeB1xMZW-7HV7-c2VW80688LsFNS8EuO6kyNEHNxQCf2FFTP-Ach0f2TLfDOr0dTLEsqtbvCresikCLLLjQhgqnKVOXTKksdEAI3l2ekkgFuDB3s1fj33Zo38OGiJkw9c47hA2JZt-vxn2o0NR9jO6W1Npmx8fEiK3D8KkYGDtGM1T75EA-41UiL_YcToF7xi1fFIRD_49cV_1Qpqbv-dY71jdR55JzQsHHfixqaWZo3dzHsy6QdL', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=5ZgGwWnvoUmz4excM9y6BTdjOWUzMjkyOTAwYTg0ZGVkZGMxMzhiNjIzODZlMzZiMGQ4OGRhNjNmMDkzNDc1YmIzNDAwMmFmMzY0YmM1MTL6EbnUPBBvW142aRJK-vL_inR5QtJ1guaq-hGdu8OLOC4wVunmcnMU9j0KZbcch0QIJM-b8sCDK_4xIqPe4zZRsXrvKjpwcA09GDos0wx4hXzd4P6tcYUYjVSMJDd5e4-yuGTgnsRS3AUqR4a0j2njslkIFAquCEig6szM8wMTbMM2wB2nQnnJBSztDUu2HjjsIIZQpR7iMICXDdPiw0V6l1qzS21PCrFmAiHamj8JYyigsqLJxn0jAfBqG-BnvZaiPR3FwVKdYubwIc40igzn4AC1DPwctZpCs-GIOoGLPCcnbTahh7k045hwR19Ps5A=', 'searchUrlAllText' => '全部查看',), 5 => array('text' => '500m內別墅 共有1筆。買方熱門詢問 : ', 'typecode' => '別墅', 'count' => 1, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=J7iFp9OPRXVHbvXs1YT6vTczYTM1ZDRkY2Y5YzMyMzM0OTA1YTYzYzQ4NzE5MzEwNTYzZTljN2Y1MmQ1MTUzZjRhYWZhZTRjNWY4NmVmZDM9hQhSq6EIrNK18N96Qf259Xs3SPwDFApwypBzEx7qO31-xG5HL8NR_NjYYy-g7FLLKUYxZybcAgUrTealgdVZrpMp42kHN6eZN9tQeQebt9L1XY1lq-AM0_eJ0lx08E6TeegwSwgPG8NEAFcHqjLF3qDneAHaYjNWkYI6aN7FtVNoylmBB54wcu_PTjVB-fXOUCBvFB47n8D5IoCwOvtfN-IidVcdzdNI9cAIHtvjMt07JYQzioNCktW74eXvqZiJjVeAo6knJTvyyHXYk1QQh3eJo2Ku-O3bU6xE9cvSubIoR8kUcqyoOhWpQ5hgVBkEjA8k97ruYWfgJu9bBANG', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=7KOjc2ng45hzLeTx2SrZgmRiNjAzYWY1ODE4OWJlZWQ0YTFjZWFjMDVkYTk1NThhMzM0M2UwODY0MmFkODlkM2Y4NWM4Njc5MzAzNzg5MDQYPGLgh9oF9kKxa_Lg7OTEcTVnexeijFxvbrMeuCm0tiD7U37CZ96YB948XmkGTNC8oyQZDvQOe_X0EhcXmRMcsLv6j9aQRsyIeVpp38qwq_gY0ah3gTS3WZIx3pKmzwC3yvg0o2xBuwj7GD_8yFV7XQwT3M-Xi3eOazuJ_8maS9qPVt6sK7F4xOAgEHoogiPX-FGlg5pVKn58svzNKmnrwv45DZRIzhHgJ4fvyNhvcCF6wmuiU3j6E1HYOv7quY6N_iOPydTpzSHxBuR9bBb-MmZSNHovKbCjOoJEq-0_CGBZzG85mSBxJwjKWLB0Yik=', 'searchUrlAllText' => '全部查看',), 6 => array('text' => '500m內辦公大樓 共有24筆。買方熱門詢問 : ', 'typecode' => '辦公大樓', 'count' => 24, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=9ff0UeQijAoueMaEBiN6NDlkNDNjYzNjYzQ4YWU1MzdmN2VlNTZmMmU2MzNiOTk5OGY1OGY1YzMyYWY1MWJlYTNlNzlkODAxNGMxMDA4ZGbA1-K0fFNPiABIpehueEo0vMbN8US5VIIn-tqAEmIpPrnpd6iW4ZGyPm1RBO6xygj__O3hHd_xDNkYImN6HKVg1OMaqUB1mFa4xNLhuH1E2i4GVmhs2Dv0Y3qRiESuUkA3wNhi2STeDDy--xTV4WZKdwVnihpF8NDKwBDXO85Ws6GvPF7NjCnIBw8HFOZwJ7jF0zmKIeODVmuc6tPQDwHSHTn27lVEvTj9ZY-rFO9giu9Xh3bFQVZr4NS6qzAye0584BfuSGznmk9_1mBkouaGhKQjlEMqpQiRCLQ9zUUcuUv-tgkjwm7xPCQlbLr-lPsxh3fgY4y-232z0cLUbtBm', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=ec9HNcJMxtob3ewsGsDPYWVkZTZmMzAwZGI5YjU3MmJlN2MxMzFmMDRhMWYxMDVkODEyMjFmNmYyMTcwODBjYTE1NWFhOGQ4OWIwOWRkOGV-5bnqdcjOJHaykUQqEzpkX9viMPnvuIS1NSINc0nyfdX1xsfE7IMLDGIdiSDf65BisCd8zvWfHSXJAFAxOXqwGfizmCbNZFY454XCDJcrHUTCZY_Ki_Of-BmZni8mv_kT4AtnjK5m-E_P5avAGedgLmDypHvIJsZa2sh5XpmRxmTqPGyV8Zb5T34HOlRq730MPMOmfj9ZywP5d28EkZkHFt-9bSP37zdiUuxQft91OAloFifk1P9A7kdG1pymdshnMNTUnE-K5B1LUTN187KFW88XLRTO54J7v-YNi4rNh882eWI8A0-5GL4a_CzyLC4=', 'searchUrlAllText' => '全部查看',), 7 => array('text' => '500m內店面 共有53筆。買方熱門詢問 : ', 'typecode' => '店面', 'count' => 53, 'searchUrlLowPrice' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=45h1JPzZgLcLzcZzqYb1LGViZGFmOTE2Mzg0OTEyYjZiZmUwYjI4OWYzMDdmYjFjODY5MDQzOTUyOTUxYTZhMmE4YzcyNjJmOTA4NTFiNDDPtBI1L6xZjizF_X3ZAb5R10MLCPyTxDxVk-Gop8B4cpK6OxwBM2O30EZBcWq7nXmbMYIdMfdm7MXuYEGXQyK4k67ly5mpaYxDec061gfdy-NZlY82k6C_QSTNMIILVtQGu-2Be6pukwjQBDttorrlbsT0tfWgJaEoDUtqIZhje72YXnGv3Ogrvdw83ceEVsuBV1Qr738JTueKVhFJ2pA4Ib3YUbs-1hTjIkAVGdcamC0wKL0tp38K7FwpwtY7WKEtDQQFKyeLjdD1HQ5IBXqK-Xs1tY_sxji93Cea87Ky3R7k3S9js0EcGYklN0MY_dS_k10lB4DIcT7caG9Fjcyk', 'searchUrlLowPriceText' => '< 1200萬 低總價', 'searchUrlAll' => 'https://dev-member.rakuya.com.tw/login/auth-login?token=lhrZE74bNg3Xm65SsfbUJzg5ZTMwMmI1M2RmYjM1ZTdlN2JkZGExNTA1YjY5MTQ0NjBjNGM0NGE2ZTJkZTEzZDQzMTI5MTFlMmZjZWFhOWGSBwh3Ql53SSPn51pBrZW9qhu1sMiykt4ZbF-j3xg1YOrasNKvAS3R3v-SjYx4mj-6rx4nveF8_s9XqaMrDqH1yKYzS6ehCB7vUI4-UZp_m_n0gp0smj_iN1OaM2TbWkRnsDsXbxIO8gsepn71-zAIsKU9jiFsqbqXX9FLPajHbZq_pMi_cViU1yUdMf4FXPdwgFexTb19aKZmtTSY8VtYOVa-Fuvj06_AmaQMqX9jVhqAmPotyYMQjLWvP1I0eI5BjjOL7pu5XaYS2V-1CseNybcVBvyL4HF07EjEauzCrbnVV08VC38AKbR47esq5Ds=', 'searchUrlAllText' => '全部查看',),);
// $CarouselColumn = [];
// foreach ($lineReplyMess as $key => $content) {
// 	$UriTemplate = [];
// 	if (!empty($content['searchUrlLowPrice'])) {
// 		$UriTemplate[] = new \LINE\LINEBot\TemplateActionBuilder\UriTemplateActionBuilder($content['searchUrlLowPriceText'], $content['searchUrlLowPrice'] . '&openExternalBrowser=1');
// 	}
// 	if (!empty($content['searchUrlAll'])) {
// 		// $UriTemplate[] = new \LINE\LINEBot\TemplateActionBuilder\UriTemplateActionBuilder($content['searchUrlAllText'], 'https://i.imgur.com/adKT5rY.jpg?openExternalBrowser=1');
// 		$UriTemplate[] = new \LINE\LINEBot\TemplateActionBuilder\UriTemplateActionBuilder($content['searchUrlAllText'], $content['searchUrlAll'] . '&openExternalBrowser=1');
// 	}
// 	$CarouselColumn[] = new \LINE\LINEBot\MessageBuilder\TemplateBuilder\CarouselColumnTemplateBuilder($content['typecode'], $content['text'], 'https://i.imgur.com/VKihAYW.jpg', $UriTemplate, '#FFFFFF');
// }
// $Carousel = new \LINE\LINEBot\MessageBuilder\TemplateBuilder\CarouselTemplateBuilder($CarouselColumn, 'rectangle', 'cover');
// $textMessageBuilder = new \LINE\LINEBot\MessageBuilder\TemplateMessageBuilder('CCC', $Carousel);
// $bot->replyMessage($linePost->getReplyToken(), $textMessageBuilder);
// exit;

// $ButtonTemplate = new \LINE\LINEBot\MessageBuilder\TemplateBuilder\ButtonTemplateBuilder(
// 	'公寓',
// 	'60筆60筆60筆60筆60筆60筆60筆60筆60筆60筆60筆60筆60筆60筆60筆60筆',
// 	'https://i.imgur.com/VKihAYW.jpg',
// 	[
// 		new \LINE\LINEBot\TemplateActionBuilder\UriTemplateActionBuilder('url', 'https://open.spotify.com/track/12095GlriCNhVCbJV30vKw?si=c8713d60fa4f4a4e'),
// 		new \LINE\LINEBot\TemplateActionBuilder\UriTemplateActionBuilder('url', 'https://open.spotify.com/track/12095GlriCNhVCbJV30vKw?si=c8713d60fa4f4a4e'),
// 	],
// 	'rectangle',
// 	'cover',
// 	'#FFFFFF'
// );
// $textMessageBuilder = new \LINE\LINEBot\MessageBuilder\TemplateMessageBuilder('alert', $ButtonTemplate);
// $bot->replyMessage($linePost->getReplyToken(), $textMessageBuilder);
// exit;

$QuickReplyMessageBuilder = new QuickReplyMessageBuilder([
	new QuickReplyButtonBuilder(new LocationTemplateActionBuilder('Location')),
	new QuickReplyButtonBuilder(new  \LINE\LINEBot\TemplateActionBuilder\CameraTemplateActionBuilder('Camera')),
	new QuickReplyButtonBuilder(new  \LINE\LINEBot\TemplateActionBuilder\CameraRollTemplateActionBuilder('Camera roll')),
]);
$messageInfo = $linePost->getMessage();
file_put_contents('php://stderr', json_encode($messageInfo));
if ($messageInfo['type'] == 'text') {
	$textMessageBuilder = new \LINE\LINEBot\MessageBuilder\TextMessageBuilder($messageInfo['text'], $QuickReplyMessageBuilder);
	$bot->replyMessage($linePost->getReplyToken(), $textMessageBuilder);
}
if ($messageInfo['type'] == 'location') {
	$pushMessageBuilder = new \LINE\LINEBot\MessageBuilder\TextMessageBuilder($HttpRequestBody . PHP_EOL . $messageInfo['latitude'] . ' ' . $messageInfo['longitude'] . PHP_EOL . $messageInfo['address'], $QuickReplyMessageBuilder);
	$bot->pushMessage($linePost->getUserId(), $pushMessageBuilder);
}
$LineJson = new LineJson();
$data = $LineJson->menu();
$richMenuBuilder = new \LINE\LINEBot\RichMenuBuilder($data['size'], $data['selected'], $data['name'], $data['chatBarText'], $data['areas']);
$response = $bot->createRichMenu($richMenuBuilder);
$status = $response->getHTTPStatus();
if ($status == 200) {
	$content = $response->getJSONDecodedBody();
	$richMenuId = $content['richMenuId'];
	$imagePath = __DIR__ . '/ellall.jpg';
	$contentType = 'image/jpeg';
	$imgResponse = $bot->uploadRichMenuImage($richMenuId, $imagePath, $contentType);
	$ch = curl_init();
	curl_setopt($ch, CURLOPT_URL, 'https://api.line.me/v2/bot/user/all/richmenu/' . $richMenuId);
	curl_setopt($ch, CURLOPT_POST, true);
	curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');
	curl_setopt($ch, CURLOPT_HTTPHEADER, [
		'Content-Type: application/json',
		'Authorization: Bearer ' . $channelAccessToken
	]);
	$result = curl_exec($ch);
	curl_close($ch);
} else {
	error_log('fail');
}
exit;

$jsonMap = '{"destination":"U52d37d1d9b625754fa7308ed6af263ef","events":[{"type":"message","message":{"type":"location","id":"14743074306580","latitude":25.028028164750477,"longitude":121.5493593925288,"address":"106台灣台北市大安區敦化南路二段111號"},"timestamp":1631590614516,"source":{"type":"user","userId":"U420aa8a5b3859615a73a08c3f9fa53e2"},"replyToken":"5b7db4bb1a924978918706f76292c7a0","mode":"active"}]}';
